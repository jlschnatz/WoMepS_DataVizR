---
title: "Workshop: ggplot2"
title-block-style: default
subtitle  : "Tag 1"
author    : "Arieja Farugie & Luca Schnatz"
date: "`r Sys.Date()`"
code-overflow: wrap
code-block-bg: true
code-block-border-left: "#8800FF"
smooth-scroll: true
format: 
  html:
    self-contained: true
toc: true
touch: true
theme: lux
toc-title: "Inhalt"
highlight-style: printing
---

# Datensatz laden

Zun√§chst laden wir den Datensatz:

```{r}
#| message: false
library(tidyverse)
library(here)

exercise_data <- read_rds(here("data/exercise_data/clean_exercise_data.rds"))
glimpse(exercise_data)

```

# Basics von ggplot2

-   wir werden die auf ganz einfacher Ebene die wichtigsten Arten von Plots kennenlernen
-   anhand der verschiedenen Arten von Daten (numerisch, kategorisch)

## 1 Variable (Numerisch)

### Boxplot

-   kurze Beschreibung eines Boxplots?
-   wichtig, dass bei einer Variablen, die andere Achse keine Bedeutung besitzt

```{r}
ggplot(
  data = exercise_data,
  aes(y = psychological_distress)
  ) +
  geom_boxplot()

ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_boxplot()

```

### Histogramm

-   keep in mind: bins matter

```{r}
ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_histogram()

ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_histogram(bins = 10)

ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_histogram(bins = 40)

```

### Density-Plot

```{r}

ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_density()

ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_density(bw = .5)

ggplot(
  data = exercise_data,
  aes(x = psychological_distress)
  ) +
  geom_density(bw = 3)

```

## 1 Variable (Kategorisch)

### Barplot

-   Wann ist Barplot sinnvoll?
-   Was stellt er in dem Beispiel dar?

```{r}

ggplot(
  data = exercise_data,
  mapping = aes(x = subj_schichteinstufung)
  ) + 
  geom_bar(stat = "count")

ggplot(
  data = exercise_data,
  mapping = aes(y = subj_schichteinstufung)
  ) + 
  geom_bar(stat = "count")

ggplot(
  data = exercise_data,
  mapping = aes(x = subj_schichteinstufung,
                y = after_stat(count/sum(count)))
  ) + 
  geom_bar()

```

### Kuchendiagramm (Pie-Chart)

```{r}

exercise_data %>%
  count(konfession) %>%
  drop_na(konfession) %>%
  ggplot(
    data = .,
    mapping = aes(x = "", y = n, fill = konfession)
  ) + 
  geom_bar(stat = "identity") +
  coord_polar(theta = "y") 
```

### Donut-Diagramm

```{r}
exercise_data %>%
  count(konfession) %>%
  drop_na(konfession) %>%
  ggplot(
    data = .,
    mapping = aes(x = 2, y = n, fill = konfession)
  ) + 
  geom_bar(stat = "identity") +
  coord_polar(theta = "y", start = 200) +
  xlim(0.5, 2.5) 
```

## 2 Variablen (Numerisch, Numerisch)

```{r}
ggplot(
  data = exercise_data,
  mapping = aes(x = alter,
                y = bmi)
  ) +
  geom_point()  

ggplot(
  data = exercise_data,
  mapping = aes(x = alter,
                y = bmi,
                color = geschlecht)
) + 
  geom_point()

ggplot(
  data = exercise_data,
  mapping = aes(x = alter,
                y = bmi)
                
  ) + 
  geom_point() + 
  facet_grid(cols = vars(geschlecht)) 

ggplot(
  data = exercise_data,
  mapping = aes(x = alter,
                y = bmi,
                color = geschlecht)
) + 
  geom_point() + 
  facet_grid(cols = vars(geschlecht)) 
```

## 2 Variablen (Kategorisch, Kategorisch)

```{r}

ggplot(
  data = exercise_data,
  mapping = aes(x = subj_schichteinstufung, fill = geschlecht)
  ) + 
  geom_bar(stat = "count", position = position_dodge(width = 1))

ggplot(
  data = exercise_data,
  mapping = aes(x = subj_schichteinstufung, fill = geschlecht)
  ) + 
  geom_bar(stat = "count", position = position_stack())

```

## 2 Variablen (Numerisch, Kategorisch)

```{r}

ggplot(
  data = exercise_data,
  mapping = aes(x = subj_schichteinstufung,
                y = psychological_distress)
  ) + 
  geom_boxplot()

```

## Mehr als zwei Variablen

```{r}

ggplot(
  data = exercise_data,
  mapping = aes(x = alter,
                y = bmi,
                color = geschlecht)
) + 
  geom_point(alpha = 0.7) + 
  facet_grid(cols = vars(geschlecht)) 

```

-   Welche Basics Plots sollten besprochen werden?
-   Barplot, Scatter, Boxplot, Density, Histogramm, Pie, Donought
-   Idee: Vorstellung der Plots aufteilen nach Art der Daten
    -   Numerisch (1 Variable), Numerisch (2 Variablen)
    -   Kategorisch (1 Variable)
